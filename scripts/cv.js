"use strict";const body=document.querySelector("body"),quinaminePicViewer=document.querySelector(".quinamine-pic-viewer"),frame=document.querySelector(".frame"),imgs=document.querySelectorAll(".album-container img"),currentImg=document.querySelector("#current-img"),currentImgTitle=document.querySelector(".current-img-title"),leftArrow=document.querySelector(".arrow.previous"),rightArrow=document.querySelector(".arrow.next"),zoomOutBtn=document.querySelector("button.zoom-out"),zoomInBtn=document.querySelector("button.zoom-in"),zoomOutput=document.querySelector(".zoom-output"),closeQpvBtn=document.querySelector(".close-qpv"),qpv={abrirImagem(){for(let e=0;e<imgs.length;e++)imgs[e].addEventListener("click",()=>{currentImg.src=imgs[e].src,currentImgTitle.textContent=imgs[e].alt,quinaminePicViewer.classList.add("on"),e<=0?this.gerenciarSetas("larr","hide"):this.gerenciarSetas("larr","show"),e>=imgs.length-1?this.gerenciarSetas("rarr","hide"):this.gerenciarSetas("rarr","show"),this.handleOverflowBodyContent("hide"),this.mostrarPercentagemDeZoom()})},pularImagem(e){let r;for(let t=0;t<imgs.length;t++)if(currentImg.src==imgs[t].src){r=t;break}r+=e,currentImg.src=imgs[r].src,currentImgTitle.textContent=imgs[r].alt,r<=0?this.gerenciarSetas("larr","hide"):this.gerenciarSetas("larr","show"),r>=imgs.length-1?this.gerenciarSetas("rarr","hide"):this.gerenciarSetas("rarr","show")},gerenciarSetas(e,r){"larr"===e&&"hide"===r?leftArrow.classList.add("off"):"larr"===e&&"show"===r?leftArrow.classList.remove("off"):"rarr"===e&&"hide"===r?rightArrow.classList.add("off"):rightArrow.classList.remove("off"),qpv.resetarZoom(),qpv.mostrarPercentagemDeZoom()},mostrarPercentagemDeZoom(){let e=currentImg.clientHeight,r=currentImg.naturalHeight,t=(100*e/r).toFixed(0);currentImg.hasAttribute("data-originalzoom")||currentImg.setAttribute("data-originalzoom",`${t}`),zoomOutput.textContent=`${t}%`},gerenciarZoom(e){let r=(10*currentImg.naturalHeight/100).toFixed(0),t=Number(currentImg.clientHeight),i=Number(zoomOutput.textContent.split("%")[0]),o=Number(currentImg.dataset.originalzoom);if("ampliar"===e){if(t+=Number(r),(i+=10)>1e3)return i=1e3,!1}else if("reduzir"===e){if(t-=Number(r),(i-=10)<o)return i=o,!1}else if("zoom2x"===e){let a=currentImg.hasAttribute("data-zoom2xstatus"),n=currentImg.dataset.zoom2xstatus,s=(o*currentImg.naturalHeight/100).toFixed(0);!a&&i<=o||"false"===n&&i<=o?(i=2*o,t=2*s,currentImg.setAttribute("data-zoom2xstatus","true")):(i=2*o/2,t=2*s/2,currentImg.setAttribute("data-zoom2xstatus","false"))}zoomOutput.textContent=`${i}%`,currentImg.style.cssText=`height: ${t}px;`,currentImg.classList.add("maxWidth-n-maxHeight-initial")},resetarZoom(){currentImg.style.height="auto",currentImg.classList.remove("maxWidth-n-maxHeight-initial")},handleOverflowBodyContent(e){"hide"===e?body.classList.add("overflow-h"):body.classList.remove("overflow-h")},fechar(){quinaminePicViewer.classList.remove("on"),qpv.resetarZoom(),qpv.handleOverflowBodyContent("show")}};qpv.abrirImagem(),leftArrow.addEventListener("click",()=>qpv.pularImagem(-1)),rightArrow.addEventListener("click",()=>qpv.pularImagem(1)),zoomOutBtn.addEventListener("click",()=>qpv.gerenciarZoom("reduzir")),zoomInBtn.addEventListener("click",()=>qpv.gerenciarZoom("ampliar")),currentImg.addEventListener("dblclick",()=>qpv.gerenciarZoom("zoom2x")),closeQpvBtn.addEventListener("click",qpv.fechar),window.addEventListener("resize",qpv.mostrarPercentagemDeZoom),window.addEventListener("keyup",e=>{let r=Number(frame.clientWidth);if(Number(currentImg.clientWidth)<r){let t=e.key;if("arrowleft"===t.toLowerCase())try{qpv.pularImagem(-1)}catch(i){alert("Sem imagens anteriores.")}else if("arrowright"===t.toLowerCase())try{qpv.pularImagem(1)}catch(o){alert("Sem imagens posteriores.")}}});